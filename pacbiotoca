==Introduction==
:''Pacbiotoca'' is a hybrid and denovo corrector, taking as input the long reads in FASTQ file format and short reads in a frg file.

Website : http://wgs-assembler.sourceforge.net/wiki/index.php/PacBioToCA

==Installation==
:''PacBioToCA'' can be downloaded as source code or pre-compiled binaries.
	
Code source compilation:

    $ bzip2 -dc wgs-8.3rc2.tar.bz2 | tar -xf
    $ cd wgs-8.3rc2 
    $ cd kmer && make install && cd .. 
    $ cd src && make && cd .. 
    $ cd ..

Extraction of pre-compiled binaries files:

    $ bzip2 -dc wgs-8.3rc2-*.tar.bz2 | tar -xf

==Input data==
:''PacBioToCA'' requires as input an estimation of the genome length to be assembled, a configuration file, long reads in a FASTQ file format and a fragments file "frg" holding short reads in the case of a hybrid correction.
Programs such as ''fastatoCA'' and ''fastqtoCA'' are available in the PBcR package to perform conversions from common formats such as FASTA or FASTQ. Converting the FASTA file to .frg requires not only a file containing the sequence but also a quality values FASTA file.

    $ fastaToCA -l libraryname -s seq.fasta -q qlt.fasta > seq.frg

:<b>l</b>: library name
:<b>s</b>: short reads in FASTA file format
:<b>q</b>: quality values FASTA file

    $ fastqToCA -libraryname LIB -technology pacbio-corrected -reads seq.fastq > seq.frg

:<b>libraryname</b>: library name
:<b>technology</b>: type of data (pacbio, illumina, 454,...)
:<b>reads</b>: short reads in FASTQ file format

==Pipeline==
:''PacBioToCA'' is able to perform hybrid or denovo correction. In order to launch a denovo correction, simply do not provide the .frg file (short reads).

    $ ./pacBioToCA -threads 8 -libraryname name -s spec_file.spec -genomeSize <genome length> -fastq Long_reads.fastq short_reads.frg

:<b>libraryname</b>: prefix used for naming output files
:<b>s</b>: file containing specific options for correction
:<b>genomeSize</b>: genome length
:<b>fastq</b>: long reads to correct in FASTQ file format.

==Output data==
:The corrected reads are in output files "libraryname.fasta" and "libraryname.fastq".

==Correction evaluation==
:Dataset:

{| class="wikitable"
|-
!Reference genome
|Escherichia coli k-12 MG1655 1 chromosome (4 641 652 pb)
|-
!Pacbio reads (P6C4)
|87497 raw reads (100x coverage)
|-
!Illumina reads (MiSeq)
|16759877 reads (2x150pb)
|}

The reference genome is used to evaluate long reads correction, based on metrics produced by Blasr alignments before the assembly and by the QUAST software after the assembly.

''Blasr'' alignment metrics:

:<b>Size</b>: The sum of the length of the corrected long reads, divided by the length of uncorrected long reads.

:<b>Execution time</b>: Corrector execution time.

:<b>% mapped region</b>: Proportion of corrected reads that \emph{BLASR} succeeded in mapping to the reference genome.

:<b>Mean number of match</b>:  The average number of match per long read.

:<b>% identity</b>: Percentage of identity given by \emph{BLASR} for the region of long read that could be aligned.

''Quast'' metrics:

:<b># contigs (> 1000pb)</b>: Total number of contigs exceeding 1000 bp after assembly.

:<b>Total length</b>: Assembly length.

:<b>N50</b>: Length for which the collection of all contigs of this length or greater, covers at least half of the assembly.

:<b>Genome fraction (\%)</b>: the percentage of aligned bases in the reference genome.

The assembly step is performed by ''Smartdenovo''.

{| class="wikitable"
|-
!Metrics (Blasr, Quast)
!''Pacbiotoca'' hybrid correction
!''Pacbiotoca'' denovo correction
|-
!Size
|21.29
|30.20
|-
!Execution time
|69 305s
|5 120s
|-
!% mapped region
|97.64
|97.68
|-
!Mean number of match
|3 391
|12 387
|-
!% identity
|99.88
|98.60
|-
!# contigs (>=1000pb)
|15
|1
|-
!N50
|437 223
|4 646 758
|-
!Total length
|4 640 384
|4 646 758
|-
!Genome fraction
|99.42
|99.97
|}

More assembly results can be found at

